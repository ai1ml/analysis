st.markdown("""
<style>
/* Keep things compact but not clipped */
.block-container { padding-top: 1.0rem; padding-bottom: 0.8rem; }

/* Tighten gaps between horizontal blocks/columns */
div[data-testid="stHorizontalBlock"] { gap: 0.5rem !important; }
div[data-testid="column"] { padding-top: 0.2rem; padding-bottom: 0.2rem; }

/* Headings spacing (avoid big margins under H1) */
h1 { margin-bottom: 0.4rem; }

/* Radio group spacing (keep label collapsed but reserve space) */
div[role="radiogroup"] { margin-bottom: 0.2rem; }

/* KPI sizing */
div[data-testid="stMetricValue"] { font-size: 1.15rem; }
div[data-testid="stMetricLabel"] { font-size: 0.80rem; color: #666; }
</style>
""", unsafe_allow_html=True)


def kpi_strip(items):
    cols = st.columns(len(items))
    for col, (label, val) in zip(cols, items):
        with col:
            st.metric(label=label, value=val)

# ultra-thin divider under KPIs (optional)
def thin_divider():
    st.markdown("<hr style='margin:6px 0 4px 0; opacity:0.4;'>", unsafe_allow_html=True)


kpi_strip(ebs_kpis() if analysis=="EBS" else
          ec2_od_kpis() if analysis=="EC2: OnDemand" else
          ec2_ri_kpis() if analysis=="EC2: Reserved (RI)" else
          snaps_kpis()  if analysis=="Snapshots" else
          rds_kpis())

thin_divider()
